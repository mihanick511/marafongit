"use strict";

window.onload = function () {
  mainObj.inition();
};
let mainObj = {
  inition() {},
  actionClass(tags, className, action) {
    tags.forEach(el => {
      action === 'add' ? el.classList.add(className) : el.classList.remove(className);
    });
  }
};

mainObj.gPopup = {
  overlay: document.querySelector('._overlay'),
  body: document.querySelector('body'),
  html: document.querySelector('html'),
  val: document.querySelector('._value'),
  clientsCont: [{
    title: 'норникель'
  }, {
    title: 'кольская гмк'
  }, {
    title: 'русГидро'
  }, {
    title: 'фосагро'
  }, {
    title: 'гидроМонтаж'
  }],
  addActionInOpen() {
    this.overlay.classList.add('open');
    this.body.style.overflow = 'hidden';
    this.html.style.overflow = 'hidden';
  },
  open(contentClass, idx) {
    event.preventDefault();
    let popupHtml = document.querySelector(contentClass);
    if (idx) this.val.innerHTML = this.clientsCont[idx].title;
    this.addActionInOpen();
    console.log(popupHtml);
    this.overlay.innerHTML = popupHtml.innerHTML;
  },
  close() {
    this.overlay.classList.remove('open');
    this.body.style.overflow = 'auto';
    this.html.style.overflow = 'auto';
    this.val.innerHTML = 'Возможный контент';
  }
};
mainObj.header = {
  headerMenuList: document.querySelector('._headerMenuList'),
  headerMenuBtn: document.querySelector('._headerMenuBtn'),
  headerPhoneWrap: document.querySelector('._headerPhoneWrap'),
  showMenu() {
    console.log(this.headerMenuBtn);
    if (this.headerMenuList.classList.contains('active')) {
      this.headerMenuList.classList.remove('active');
      this.headerMenuBtn.classList.remove('active');
      // this.btnNameMenuTwo.classList.remove('active')
    } else {
      this.headerMenuList.classList.add('active');
      this.headerMenuBtn.classList.add('active');
      // this.btnNameMenuTwo.classList.remove('active')
    }
  },
  showTel() {
    console.log(this.headerPhoneWrap);
    if (this.headerPhoneWrap.classList.contains('active')) {
      this.headerPhoneWrap.classList.remove('active');
    } else {
      this.headerPhoneWrap.classList.add('active');
    }
  }
};
mainObj.pag = {
  itms: document.querySelectorAll('._pagItem'),
  mainItms: document.querySelectorAll('._mainItem'),
  nextBtn: document.querySelector('._nextBtn'),
  showBtn: document.querySelector('._showBtn'),
  pagDots: document.querySelector('._pagDots'),
  mul: document.querySelector('._mul'),
  idxFirst: 0,
  step: 4,
  count: 1,
  start: 1,
  init() {
    let arr = [];
    this.show(3);
    this.itms.forEach(el => {
      arr.push(el);
    });
    let filt = arr.filter(el => +el.innerHTML > 4);
    this.hideEl(filt);
    this.nextBtn.addEventListener('click', () => {
      this.itms[this.idxFirst].style.display = 'none';
      this.itms[this.idxFirst + this.step].style.display = 'block';
      if (this.idxFirst > this.step) {
        this.pagDots.style.display = 'none';
        this.mul.style.display = 'none';
        return;
      }
      this.idxFirst++;
    });
  },
  hideEl(arrTag) {
    arrTag.forEach(tag => {
      tag.style.display = 'none';
    });
  },
  show(co) {
    event.preventDefault();
    if (!this.showBtn) return;
    let arr = [];
    this.mainItms.forEach(el => {
      arr.push(el);
    });
    let filt = arr.filter((el, idx) => idx > 2);
    this.hideEl(filt);
    this.showBtn.addEventListener('click', () => {
      this.count += co;
      for (let i = this.start; i < this.count; i++) {
        this.mainItms[i].style.display = 'block';
      }
    });
  }
};